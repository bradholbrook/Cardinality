(function(n){if(typeof bootstrap=="function")bootstrap("promise",n);else if(typeof exports=="object")module.exports=n();else if(typeof define=="function"&&define.amd)define(n);else if(typeof ses!="undefined")if(ses.ok())ses.makeQ=n;else return;else Q=n()})(function(){"use strict";function h(n){var t=Function.call;return function(){return t.apply(n,arguments)}}function at(n){return n===Object(n)}function si(n){return oi(n)==="[object StopIteration]"||n instanceof tt}function vt(n,t){var r,i,u;if(k&&t.stack&&typeof n=="object"&&n!==null&&n.stack&&n.stack.indexOf(rt)===-1){for(r=[],i=t;!!i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(n.stack),u=r.join("\n"+rt+"\n"),n.stack=hi(u)}}function hi(n){for(var r=n.split("\n"),u=[],t,i=0;i<r.length;++i)t=r[i],li(t)||ci(t)||!t||u.push(t);return u.join("\n")}function ci(n){return n.indexOf("(module.js:")!==-1||n.indexOf("(node.js:")!==-1}function yt(n){var r=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(n),t,i;return r?[r[1],Number(r[2])]:(t=/at ([^ ]+):(\d+):(?:\d+)$/.exec(n),t)?[t[1],Number(t[2])]:(i=/.*@(.+):(\d+)$/.exec(n),i?[i[1],Number(i[2])]:void 0)}function li(n){var t=yt(n),r,i;return t?(r=t[0],i=t[1],r===ct&&i>=ri&&i<=ti):!1}function pt(){if(k)try{throw new Error;}catch(i){var n=i.stack.split("\n"),r=n[0].indexOf("@")>0?n[1]:n[2],t=yt(r);return t?(ct=t[0],t[1]):void 0}}function ut(n,t,i){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+i+" instead.",new Error("").stack),n.apply(n,arguments)}}function n(n){return c(n)}function r(){function y(n){t=n,s.source=n,v(l,function(t,i){u(function(){n.promiseDispatch.apply(n,i)})},void 0),l=void 0,a=void 0}var l=[],a=[],t,h=nt(r.prototype),s=nt(f.prototype);if(s.promiseDispatch=function(n,r,f){var e=i(arguments);l?(l.push(e),r==="when"&&f[1]&&a.push(f[1])):u(function(){t.promiseDispatch.apply(t,e)})},s.valueOf=ut(function(){if(l)return s;var n=wt(t);return o(n)&&(t=n),n},"valueOf","inspect"),s.inspect=function(){return t?t.inspect():{state:"pending"}},n.longStackSupport&&k)try{throw new Error;}catch(p){s.stack=p.stack.substring(p.stack.indexOf("\n")+1)}return h.promise=s,h.resolve=function(n){t||y(c(n))},h.fulfill=function(n){t||y(ot(n))},h.reject=function(n){t||y(e(n))},h.notify=function(n){t||v(a,function(t,i){u(function(){i(n)})},void 0)},h}function ai(n){if(typeof n!="function")throw new TypeError("resolver must be a function.");var t=r();return ht(n,t.resolve,t.reject,t.notify).fail(t.reject),t.promise}function f(n,t,i){var r,u;return t===void 0&&(t=function(n){return e(new Error("Promise does not support operation: "+n))}),i===void 0&&(i=function(){return{state:"unknown"}}),r=nt(f.prototype),r.promiseDispatch=function(i,u,f){var o;try{o=n[u]?n[u].apply(r,f):t.call(r,u,f)}catch(s){o=e(s)}i&&i(o)},r.inspect=i,i&&(u=i(),u.state==="rejected"&&(r.exception=u.reason),r.valueOf=ut(function(){var n=i();return n.state==="pending"||n.state==="rejected"?r:n.value})),r}function wt(n){if(o(n)){var t=n.inspect();if(t.state==="fulfilled")return t.value}return n}function o(n){return at(n)&&typeof n.promiseDispatch=="function"&&typeof n.inspect=="function"}function bt(n){return at(n)&&typeof n.then=="function"}function vi(n){return o(n)&&n.inspect().state==="pending"}function yi(n){return!o(n)||n.inspect().state==="fulfilled"}function pi(n){return o(n)&&n.inspect().state==="rejected"}function wi(){ft||typeof window=="undefined"||window.Touch||!window.console||console.warn("[Q] Unhandled rejection reasons (should be empty):",s),ft=!0}function kt(){for(var n,t=0;t<s.length;t++)n=s[t],n&&typeof n.stack!="undefined"?console.warn("Unhandled rejection reason:",n.stack):console.warn("Unhandled rejection reason (no stack):",n)}function et(){if(s.length=0,d.length=0,ft=!1,!y&&(y=!0,typeof process!="undefined"&&process.on))process.on("exit",kt)}function bi(n,t){y&&(d.push(n),s.push(t),wi())}function ki(n){if(y){var t=ui(d,n);t!==-1&&(d.splice(t,1),s.splice(t,1))}}function e(n){var t=f({when:function(t){return t&&ki(this),t?t(n):this}},function(){return this},function(){return{state:"rejected",reason:n}});return bi(t,n),t}function ot(n){return f({when:function(){return n},get:function(t){return n[t]},set:function(t,i){n[t]=i},"delete":function(t){delete n[t]},post:function(t,i){return t===null||t===void 0?n.apply(void 0,i):n[t].apply(n,i)},apply:function(t,i){return n.apply(t,i)},keys:function(){return ei(n)}},void 0,function(){return{state:"fulfilled",value:n}})}function c(n){return o(n)?n:bt(n)?di(n):ot(n)}function di(n){var t=r();return u(function(){try{n.then(t.resolve,t.reject,t.notify)}catch(i){t.reject(i)}}),t.promise}function gi(n){return f({isDef:function(){}},function(t,i){return p(n,t,i)},function(){return c(n).inspect()})}function t(t,i,r,u){return n(t).then(i,r,u)}function dt(n,i,r){return t(n,function(n){return b(n).then(function(n){return i.apply(void 0,n)},r)},r)}function nr(n){return function(){function i(n,i){var o;if(it){try{o=u[n](i)}catch(s){return e(s)}return o.done?o.value:t(o.value,r,f)}try{o=u[n](i)}catch(s){return si(s)?s.value:e(s)}return t(o,r,f)}var u=n.apply(this,arguments),r=i.bind(i,"send"),f=i.bind(i,"throw");return r()}}function tr(t){n.done(n.async(t)())}function ir(n){throw new tt(n);}function rr(n){return function(){return dt([this,b(arguments)],function(t,i){return n.apply(t,i)})}}function p(n,t,i){var f=r();return u(function(){c(n).promiseDispatch(f.resolve,t,i)}),f.promise}function l(n){return function(t){var r=i(arguments,1);return p(t,n,r)}}function st(n,t){var r=i(arguments,2);return w(n,t,r)}function a(n,t){return p(n,"apply",[void 0,t])}function ht(n){var t=i(arguments,1);return a(n,t)}function ur(n){var t=i(arguments,1);return function(){var r=t.concat(i(arguments));return p(n,"apply",[this,r])}}function b(n){return t(n,function(n){var u=0,i=r();return v(n,function(r,f,e){var s;o(f)&&(s=f.inspect()).state==="fulfilled"?n[e]=s.value:(++u,t(f,function(t){n[e]=t,--u==0&&i.resolve(n)},i.reject))},void 0),u===0&&i.resolve(n),i.promise})}function fr(n){return t(n,function(n){return n=g(n,c),t(b(g(n,function(n){return t(n,lt,lt)})),function(){return n})})}function er(n){return t(n,function(n){return b(g(n,function(i,r){return t(i,function(t){return n[r]={state:"fulfilled",value:t},n[r]},function(t){return n[r]={state:"rejected",reason:t},n[r]})})).thenResolve(n)})}function gt(n,i){return t(n,void 0,i)}function or(n,i){return t(n,void 0,void 0,i)}function sr(n,i){return t(n,function(n){return t(i(),function(){return n})},function(n){return t(i(),function(){return e(n)})})}function hr(i,r,f,e){var o=function(t){u(function(){if(vt(t,i),n.onerror)n.onerror(t);else throw t;})},s=r||f||e?t(i,r,f,e):i;typeof process=="object"&&process&&process.domain&&(o=process.domain.bind(o)),gt(s,o)}function cr(n,i,u){var f=r(),e=setTimeout(function(){f.reject(new Error(u||"Timed out after "+i+" ms"))},i);return t(n,function(n){clearTimeout(e),f.resolve(n)},function(n){clearTimeout(e),f.reject(n)},f.notify),f.promise}function lr(n,i){i===void 0&&(i=n,n=void 0);var u=r();return t(n,undefined,undefined,u.notify),setTimeout(function(){u.resolve(n)},i),u.promise}function ar(n,t){var f=i(t),u=r();return f.push(u.makeNodeResolver()),a(n,f).fail(u.reject),u.promise}function vr(n){var u=i(arguments,1),t=r();return u.push(t.makeNodeResolver()),a(n,u).fail(t.reject),t.promise}function yr(n){var t=i(arguments,1);return function(){var f=t.concat(i(arguments)),u=r();return f.push(u.makeNodeResolver()),a(n,f).fail(u.reject),u.promise}}function pr(n,t){var u=i(arguments,2);return function(){function o(){return n.apply(t,arguments)}var e=u.concat(i(arguments)),f=r();return e.push(f.makeNodeResolver()),a(o,e).fail(f.reject),f.promise}}function ni(n,t,u){var e=i(u||[]),f=r();return e.push(f.makeNodeResolver()),w(n,t,e).fail(f.reject),f.promise}function wr(n,t){var f=i(arguments,2),u=r();return f.push(u.makeNodeResolver()),w(n,t,f).fail(u.reject),u.promise}function br(n,t){if(t)n.then(function(n){u(function(){t(null,n)})},function(n){u(function(){t(n)})});else return n}var k=!1,tt,it,rt,w,ti;try{throw new Error;}catch(ii){k=!!ii.stack}var ri=pt(),ct,lt=function(){},u=function(){function t(){for(var u,i;n.next;){n=n.next,u=n.task,n.task=void 0,i=n.domain,i&&(n.domain=void 0,i.enter());try{u()}catch(e){if(f){i&&i.exit(),setTimeout(t,0),i&&i.enter();throw e;}else setTimeout(function(){throw e;},0)}i&&i.exit()}r=!1}var n={task:void 0,next:null},o=n,r=!1,i=void 0,f=!1,e;return u=function(n){o=o.next={task:n,domain:f&&process.domain,next:null},r||(r=!0,i())},typeof process!="undefined"&&process.nextTick?(f=!0,i=function(){process.nextTick(t)}):typeof setImmediate=="function"?i=typeof window!="undefined"?setImmediate.bind(window,t):function(){setImmediate(t)}:typeof MessageChannel!="undefined"?(e=new MessageChannel,e.port1.onmessage=t,i=function(){e.port2.postMessage(0)}):i=function(){setTimeout(t,0)},u}();var i=h(Array.prototype.slice),v=h(Array.prototype.reduce||function(n,t){var i=0,r=this.length;if(arguments.length===1)do{if(i in this){t=this[i++];break}if(++i>=r)throw new TypeError;}while(1);for(;i<r;i++)i in this&&(t=n(t,this[i],i));return t}),ui=h(Array.prototype.indexOf||function(n){for(var t=0;t<this.length;t++)if(this[t]===n)return t;return-1}),g=h(Array.prototype.map||function(n,t){var i=this,r=[];return v(i,function(u,f,e){r.push(n.call(t,f,e,i))},void 0),r}),nt=Object.create||function(n){function t(){}return t.prototype=n,new t},fi=h(Object.prototype.hasOwnProperty),ei=Object.keys||function(n){var i=[],t;for(t in n)fi(n,t)&&i.push(t);return i},oi=h(Object.prototype.toString);tt=typeof ReturnValue!="undefined"?ReturnValue:function(n){this.value=n};try{new Function("(function* (){ yield 1; })"),it=!0}catch(ii){it=!1}rt="From previous event:",n.nextTick=u,n.longStackSupport=!1,n.defer=r,r.prototype.makeNodeResolver=function(){var n=this;return function(t,r){t?n.reject(t):arguments.length>2?n.resolve(i(arguments,1)):n.resolve(r)}},n.promise=ai,n.makePromise=f,f.prototype.then=function(t,i,f){function c(n){try{return typeof t=="function"?t(n):n}catch(i){return e(i)}}function l(n){if(typeof i=="function"){vt(n,h);try{return i(n)}catch(t){return e(t)}}return e(n)}function a(n){return typeof f=="function"?f(n):n}var h=this,o=r(),s=!1;return u(function(){h.promiseDispatch(function(n){s||(s=!0,o.resolve(c(n)))},"when",[function(n){s||(s=!0,o.resolve(l(n)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(t){var i,r=!1;try{i=a(t)}catch(u){if(r=!0,n.onerror)n.onerror(u);else throw u;}r||o.notify(i)}]),o.promise},f.prototype.thenResolve=function(n){return t(this,function(){return n})},f.prototype.thenReject=function(n){return t(this,function(){throw n;})},v(["isFulfilled","isRejected","isPending","dispatch","when","spread","get","set","del","delete","post","send","mapply","invoke","mcall","keys","fapply","fcall","fbind","all","allResolved","timeout","delay","catch","finally","fail","fin","progress","done","nfcall","nfapply","nfbind","denodeify","nbind","npost","nsend","nmapply","ninvoke","nmcall","nodeify"],function(t,r){f.prototype[r]=function(){return n[r].apply(n,[this].concat(i(arguments)))}},void 0),f.prototype.toSource=function(){return this.toString()},f.prototype.toString=function(){return"[object Promise]"},n.nearer=wt,n.isPromise=o,n.isPromiseAlike=bt,n.isPending=vi,n.isFulfilled=yi,n.isRejected=pi;var s=[],d=[],ft=!1,y=!0;return n.resetUnhandledRejections=et,n.getUnhandledReasons=function(){return s.slice()},n.stopUnhandledRejectionTracking=function(){et(),typeof process!="undefined"&&process.on&&process.removeListener("exit",kt),y=!1},et(),n.reject=e,n.fulfill=ot,n.resolve=c,n.master=gi,n.when=t,n.spread=dt,n.async=nr,n.spawn=tr,n["return"]=ir,n.promised=rr,n.dispatch=p,n.dispatcher=l,n.get=l("get"),n.set=l("set"),n["delete"]=n.del=l("delete"),w=n.post=l("post"),n.mapply=w,n.send=st,n.invoke=st,n.mcall=st,n.fapply=a,n["try"]=ht,n.fcall=ht,n.fbind=ur,n.keys=l("keys"),n.all=b,n.allResolved=ut(fr,"allResolved","allSettled"),n.allSettled=er,n["catch"]=n.fail=gt,n.progress=or,n["finally"]=n.fin=sr,n.done=hr,n.timeout=cr,n.delay=lr,n.nfapply=ar,n.nfcall=vr,n.nfbind=yr,n.denodeify=n.nfbind,n.nbind=pr,n.npost=ni,n.nmapply=ni,n.nsend=wr,n.ninvoke=n.nsend,n.nmcall=n.nsend,n.nodeify=br,ti=pt(),n});
//@ sourceMappingURL=q.min.js.map